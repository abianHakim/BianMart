/*!
 * Start Bootstrap - SB Admin 2 v4.1.4 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!(function (l) {
    "use strict";

    // Ambil status sidebar dari localStorage saat halaman dimuat
    if (localStorage.getItem("sidebarToggled") === "true") {
        l("body").addClass("sidebar-toggled");
        l(".sidebar").addClass("toggled");
    }

    // Event klik tombol toggle sidebar
    l("#sidebarToggle, #sidebarToggleTop").on("click", function (e) {
        l("body").toggleClass("sidebar-toggled");
        l(".sidebar").toggleClass("toggled");

        // Simpan status sidebar ke localStorage
        if (l(".sidebar").hasClass("toggled")) {
            localStorage.setItem("sidebarToggled", "true");
        } else {
            localStorage.setItem("sidebarToggled", "false");
        }
    });

    // Resize event untuk handling collapse sidebar
    l(window).resize(function () {
        if (l(window).width() < 768) {
            l(".sidebar .collapse").collapse("hide");
        }
        if (l(window).width() < 480 && !l(".sidebar").hasClass("toggled")) {
            l("body").addClass("sidebar-toggled");
            l(".sidebar").addClass("toggled");
            l(".sidebar .collapse").collapse("hide");
        }
    });

    // Scroll event untuk mengatur tombol scroll-to-top
    l(document).on("scroll", function () {
        l(this).scrollTop() > 100
            ? l(".scroll-to-top").fadeIn()
            : l(".scroll-to-top").fadeOut();
    });

    // Smooth scrolling untuk tombol scroll-to-top
    l(document).on("click", "a.scroll-to-top", function (e) {
        var o = l(this);
        l("html, body")
            .stop()
            .animate(
                {
                    scrollTop: l(o.attr("href")).offset().top,
                },
                1e3,
                "easeInOutExpo"
            );
        e.preventDefault();
    });
})(jQuery);
